syntax = "proto3";

package reddit.v1;

option go_package = "github.com/RA341/redstash/generated/reddit/v1";

service RedditService {
  rpc AddAccount(AddAccountRequest) returns (AddAccountResponse) {}
  rpc DeleteAccount(DeleteAccountRequest) returns (DeleteAccountResponse) {}
  rpc ListAccount(ListAccountRequest) returns (ListAccountResponse) {}

  rpc SyncPosts(RunTaskRequest) returns (RunTaskResponse) {}
}

message RunTaskRequest {
  string username = 1;
}

message RunTaskResponse {}

message ListAccountRequest {}

message FullCredentials {
  uint32 AccountID = 1;
  AccountDetails account = 2;
  string postBefore = 3;
  string postAfter = 4;
}

message ListAccountResponse {
  repeated FullCredentials cred = 1;
}

message DeleteAccountRequest {
  uint32 accountId = 1;
}

message DeleteAccountResponse {}


message AddAccountRequest {
  AccountDetails details = 1;
}

message AccountDetails {
  string ClientID = 1;
  string ClientSecret = 2;
  string Username = 3;
  string Password = 4;
}

message AddAccountResponse {}

message TestRequest {}

message TestResponse {}
